<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="product">
	<select id="countAll" resultType="int" >
		select count(*) from product_info
	</select>
	<select id="getproduct" resultType="productvo">
		select * from product_info
	</select>
	<select id="getproductinfo" parameterType="String" resultType="productvo">
		SELECT INFO.PR_CODE,INFO.PR_NAME,INFO.PR_IMG,INFO.PR_BKIND, BCATE.VALUE AS PR_BKIND_VALUE,
		info.PR_SKIND, SCATE.VALUE AS PR_SKIND_VALUE,
		info.PR_COUNTRY,info.PR_CITY,info.PR_ALCOHOL,info.PR_PLACE,info.PR_FOOD,
		info.PR_CONTENT,info.PR_PRICE,info.PR_AMOUNT,info.PR_TOTALCOUNT,info.PR_LIKE,
		info.PR_USE,info.INSERT_ID,info.INSERT_DAY
		FROM PRODUCT_INFO INFO INNER JOIN
			DRINK_CATEGORY BCATE ON info.PR_BKIND = BCATE.CODE INNER JOIN
			DRINK_CATEGORY SCATE ON info.PR_SKIND = SCATE.CODE 
		WHERE PR_CODE = #{value}
	</select>
	<select id="myordercount" parameterType="string" resultType="int">
		select count(*) from order_info where user_id = #{value}
	</select>
	<select id="myorderlist" parameterType="string" resultType="ordervo">
		select * from order_info where user_id = #{value}
	</select>
	<insert id="insertorder" parameterType="ordervo">
		INSERT INTO ORDER_INFO(or_code,or_day,or_seq,pr_code,pr_name,or_status,pr_price,pr_count,user_id,RECEIVER_NAME ,RECEIVER_TEL ,RECEIVER_ADDR ,INSERT_DAY )
		values(#{orCode},(SELECT TO_CHAR(SYSDATE,'YYYYMMDD') FROM DUAL),#{orSeq},#{prCode},#{prName},1,#{prPrice},#{prCount},#{userId},#{receiverName},#{receiverTel},#{receiverAddr},sysdate)
	</insert>
	<select id="sql" resultType="hashmap">
		SELECT 'O' ||(SELECT TO_CHAR(SYSDATE,'YYYYMMDD') FROM DUAL)|| ORDER_INFO_seq.nextval ,ORDER_INFO_seq.nextval FROM DUAL
	</select>

</mapper>
